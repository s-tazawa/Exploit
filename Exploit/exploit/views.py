from django.shortcuts import render, get_object_or_404
from .models import Exploit, ExploitDetail
from django.http import Http404


# Create your views here.

def list(request):
    exploit_list_latest = Exploit.objects.order_by('insert_date')[:10]
    context = {'exploit_list_latest': exploit_list_latest}
    # print(context)
    return render(request, 'exploit/list.html', context)


def detail(request, exploit_id):
    # try:
    #     exploit_detail.object.get(pk=exploit_id)
    # except exploit.DosNotExist:
    #     return Http404('exploit does not exist')
    # return render(request, 'exploit/detail.html')
    exploit_detail_list = ExploitDetail.objects\
        .filter(exploit_id=exploit_id)\
        .order_by('insert_date')[:10]
    return render(request, 'exploit/detail.html', {'exploit_detail_list': exploit_detail_list})


def edit(request, id):
    return render(request, 'exploit/edit.html')
